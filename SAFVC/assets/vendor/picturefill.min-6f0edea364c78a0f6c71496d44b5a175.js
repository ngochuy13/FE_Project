(function(e,t){"use strict";function r(e){var t,r,i,s,o,u=e||{};t=u.elements||n.getAllElements();for(var a=0,f=t.length;a<f;a++){r=t[a];i=r.parentNode;s=undefined;o=undefined;if(!r[n.ns]){r[n.ns]={}}if(!u.reevaluate&&r[n.ns].evaluated){continue}if(i.nodeName.toUpperCase()==="PICTURE"){n.removeVideoShim(i);s=n.getMatch(r,i);if(s===false){continue}}else{s=undefined}if(i.nodeName.toUpperCase()==="PICTURE"||r.srcset&&!n.srcsetSupported||!n.sizesSupported&&r.srcset&&r.srcset.indexOf("w")>-1){n.dodgeSrcset(r)}if(s){o=n.processSourceSet(s);n.applyBestCandidate(o,r)}else{o=n.processSourceSet(r);if(r.srcset===undefined||r[n.ns].srcset){n.applyBestCandidate(o,r)}}r[n.ns].evaluated=true}}function i(){r();var n=setInterval(function(){r();if(/^loaded|^i|^c/.test(t.readyState)){clearInterval(n);return}},250);if(e.addEventListener){var i;e.addEventListener("resize",function(){if(!e._picturefillWorking){e._picturefillWorking=true;e.clearTimeout(i);i=e.setTimeout(function(){r({reevaluate:true});e._picturefillWorking=false},60)}},false)}}if(e.HTMLPictureElement){e.picturefill=function(){};return}t.createElement("picture");var n={};n.ns="picturefill";n.srcsetSupported="srcset"in t.createElement("img");n.sizesSupported=e.HTMLImageElement.sizes;n.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")};n.endsWith=function(e,t){return e.endsWith?e.endsWith(t):e.indexOf(t,e.length-t.length)!==-1};n.matchesMedia=function(t){return e.matchMedia&&e.matchMedia(t).matches};n.getDpr=function(){return e.devicePixelRatio||1};n.getWidthFromLength=function(e){e=e&&(parseFloat(e)>0||e.indexOf("calc(")>-1)?e:"100vw";e=e.replace("vw","%");if(!n.lengthEl){n.lengthEl=t.createElement("div");t.documentElement.insertBefore(n.lengthEl,t.documentElement.firstChild)}n.lengthEl.style.cssText="position: absolute; left: 0; width: "+e+";";if(n.lengthEl.offsetWidth<=0){n.lengthEl.style.cssText="width: 100%;"}return n.lengthEl.offsetWidth};n.types={};n.types["image/jpeg"]=true;n.types["image/gif"]=true;n.types["image/png"]=true;n.types["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");n.types["image/webp"]=function(){var t=new e.Image,i="image/webp";t.onerror=function(){n.types[i]=false;r()};t.onload=function(){n.types[i]=t.width===1;r()};t.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="};n.verifyTypeSupport=function(e){var t=e.getAttribute("type");if(t===null||t===""){return true}else{if(typeof n.types[t]==="function"){n.types[t]();return"pending"}else{return n.types[t]}}};n.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}};n.findWidthFromSourceSize=function(e){var t=n.trim(e).split(/\s*,\s*/),r;for(var i=0,s=t.length;i<s;i++){var o=t[i],u=n.parseSize(o),a=u.length,f=u.media;if(!a){continue}if(!f||n.matchesMedia(f)){r=a;break}}return n.getWidthFromLength(r)};n.parseSrcset=function(e){var t=[];while(e!==""){e=e.replace(/^\s+/g,"");var n=e.search(/\s/g),r,i=null;if(n!==-1){r=e.slice(0,n);var s=r[r.length-1];if(s===","||r===""){r=r.replace(/,+$/,"");i=""}e=e.slice(n+1);if(i===null){var o=e.indexOf(",");if(o!==-1){i=e.slice(0,o);e=e.slice(o+1)}else{i=e;e=""}}}else{r=e;e=""}if(r||i){t.push({url:r,descriptor:i})}}return t};n.parseDescriptor=function(e,t){var r=t||"100vw",i=e&&e.replace(/(^\s+|\s+$)/g,""),s=n.findWidthFromSourceSize(r),o;if(i){var u=i.split(" ");for(var a=u.length+1;a>=0;a--){if(u[a]!==undefined){var f=u[a],l=f&&f.slice(f.length-1);if((l==="h"||l==="w")&&!n.sizesSupported){o=parseFloat(parseInt(f,10)/s)}else if(l==="x"){var c=f&&parseFloat(f,10);o=c&&!isNaN(c)?c:1}}}}return o||1};n.getCandidatesFromSourceSet=function(e,t){var r=n.parseSrcset(e),i=[];for(var s=0,o=r.length;s<o;s++){var u=r[s];i.push({url:u.url,resolution:n.parseDescriptor(u.descriptor,t)})}return i};n.dodgeSrcset=function(e){if(e.srcset){e[n.ns].srcset=e.srcset;e.removeAttribute("srcset")}};n.processSourceSet=function(e){var t=e.getAttribute("srcset"),r=e.getAttribute("sizes"),i=[];if(e.nodeName.toUpperCase()==="IMG"&&e[n.ns]&&e[n.ns].srcset){t=e[n.ns].srcset}if(t){i=n.getCandidatesFromSourceSet(t,r)}return i};n.applyBestCandidate=function(e,t){var r,i,s;e.sort(n.ascendingSort);i=e.length;s=e[i-1];for(var o=0;o<i;o++){r=e[o];if(r.resolution>=n.getDpr()){s=r;break}}if(s&&!n.endsWith(t.src,s.url)){t.src=s.url;t.currentSrc=t.src}};n.ascendingSort=function(e,t){return e.resolution-t.resolution};n.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){var n=t[0],r=n.getElementsByTagName("source");while(r.length){e.insertBefore(r[0],n)}n.parentNode.removeChild(n)}};n.getAllElements=function(){var e=[],r=t.getElementsByTagName("img");for(var i=0,s=r.length;i<s;i++){var o=r[i];if(o.parentNode.nodeName.toUpperCase()==="PICTURE"||o.getAttribute("srcset")!==null||o[n.ns]&&o[n.ns].srcset!==null){e.push(o)}}return e};n.getMatch=function(e,t){var r=t.childNodes,i;for(var s=0,o=r.length;s<o;s++){var u=r[s];if(u.nodeType!==1){continue}if(u===e){return i}if(u.nodeName.toUpperCase()!=="SOURCE"){continue}if(u.getAttribute("src")!==null&&typeof console!==undefined){console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.")}var a=u.getAttribute("media");if(!u.getAttribute("srcset")){continue}if(!a||n.matchesMedia(a)){var f=n.verifyTypeSupport(u);if(f===true){i=u;break}else if(f==="pending"){return false}}}return i};i();r._=n;if(typeof module==="object"&&typeof module.exports==="object"){module.exports=r}else if(typeof define==="function"&&define.amd){define(function(){return r})}else if(typeof e==="object"){e.picturefill=r}})(this,this.document)
;
