window.accounting=window.accounting||{},window.UOB=window.UOB||{},window.UOB.formMethod=window.UOB.formMethod||{},window.UOB.formMethod.numeralsOnly=function(e,t){var i=$(t).val();-1!==i.indexOf(".")&&(190===e.keyCode||110===e.keyCode)&&e.preventDefault(),-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65===e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault()},window.UOB.formMethod.formatCurrency=function(e,t){var i=window.accounting.formatMoney($(t).val(),"",2);$(t).val(i)},window.UOB.formMethod.updateLabelDim=function(e){$(e).find(".input-control-group").each(function(){var e=0,t=$(this).find("label.radio-input").attr("style");t&&t.indexOf("width")>=0||$(this).find("label.radio-input:not(:hidden)").each(function(){e<$(this).width()+2&&(e=$(this).width()+2)}).width(e)});var t=$(e).find(".radio-input");t.first().data("styleCache")?$.fn.matchHeight._update():$(e).find(".radio-input").matchHeight()},jQuery(function(e){e.validator.addMethod("username",function(e){return!/[!@#$%\^&*(){}[\]<>?/|\-]/.test(e)},"Please enter a valid name."),e.validator.addMethod("NRIC",function(e){return/^[STFGstfg]\d{7}[A-Za-z]$/.test(e)},"Please enter a valid NRIC code."),e.validator.addMethod("money",function(e){return window.accounting.unformat(e)>0},"This field is required."),e.validator.addMethod("yearOldRule",function(e){var t=new Date;t.setFullYear(t.getFullYear()-21);var i=e.split("/"),n=new Date(i[2],i[1]-1,i[0]),a=Date.parse(n);return t-a>0},"Need to be greater than 21 years old!!"),e.validator.addMethod("mobile",function(e){return/^[89]\d{7}$/.test(e)},"Please enter correct mobile number."),e.validator.addMethod("phone",function(t){return""===e.trim(t)||/^[6]\d{7}$/.test(t)},"Please enter correct phone number."),e(".checkbox-item input[type='checkbox']").unbind("click").bind("click",function(){e(this).is(":checked")?e(this).closest(".checkbox-item").addClass("checked"):e(this).closest(".checkbox-item").removeClass("checked")}),e("#tab-required-documents a").click(function(t){t.preventDefault(),e(this).tab("show")}),window.FormStatus=function(){var t={},i=e(".form-status");return t.updateStatus=function(e){1===e?i.find("li").removeClass("active").filter(".step-1").addClass("active"):2===e&&i.find("li").removeClass("active").filter(".step-2, .step-1").addClass("active")},t.initUI=function(){},t.init=function(){return i.find("a").on("click",function(t){t.preventDefault();var i=e(this).closest("li");if(i.hasClass("active")){if(!e("#"+i.attr("data-related-step")).hasClass("hide"))return;e(".card-register-step").addClass("hide");var n=i.attr("data-related-step");"card-register-step-1"==n?(e(".header").toggleClass("in-step-1",!0).sticky("update"),e(".status-percent").css("width","2%")):(e(".header").toggleClass("in-step-1",!1).sticky("update"),e(".status-percent").css("width","28%")),e("#"+n).removeClass("hide"),setTimeout(function(){window.UOB.formMethod.updateLabelDim("#"+n)},0),i.addClass("active").nextAll().removeClass("active")}}),t},t.init()}(),window.CardRegistration=function(){var t,i,n,a={},r={yearofLivingInAboveAddr:{require_from_group:[1,".duration-date-group"]},monthofLivingInAboveAddr:{require_from_group:[1,".duration-date-group"]},yearofEmployment:{require_from_group:[1,".duration-date-group-2"]},monthofEmployment:{require_from_group:[1,".duration-date-group-2"]},krisflyerNumber:{require_from_group:[1,".kris-flyer"]},asiaMemberNumber:{require_from_group:[1,".kris-flyer"]},CPFStatementDate:{required:function(){return 1===e("#check-confirm-cpf-submission:checked").length}}},o=wNumb({decimals:0,thousand:",",prefix:"S$"}),d=function(t){e("html, body").animate({scrollTop:t},200)},s=function(){var t=e("body").find(".form-group-container.error:not(:hidden)");if(t.length)var i=e(t).eq(0).offset().top;else var n=e("body").find(".checkbox-item .error:not(:hidden)"),i=e(n).eq(0).closest(".checkbox-item").offset().top;e(window).width()>=1024&&(i-=e(".header").height()),d(i)},l=function(t,i){var n=e(i).closest(".form-group-container");n.length?n.append(t):e(i).parent().append(t)},u=function(t,i){e(t).closest(".form-group-container").addClass("error")},c=function(t,i){e(t).closest(".form-group-container").removeClass("error")},h=function(t){e(".header").toggleClass("in-step-1",t).sticky("update")},f=function(){t.on("submit",function(e){return e.originalEvent?!1:void 0}),i.on("submit",function(e){return e.originalEvent?!1:void 0}),t.find(".step-1-submission .btn-submit").on("click",function(e){e.preventDefault(),t.valid()?(h(!1),t.addClass("hide"),i.removeClass("hide").find(".frm-name-card input").focus(),FormStatus.updateStatus(2),d(0),n.css("width","28%"),setTimeout(function(){window.UOB.formMethod.updateLabelDim(".card-register-step-2")},0)):s()}),i.find(".step-2-submission .btn-submit").on("click",function(e){e.preventDefault(),i.valid()?i.get(0).submit():s()}),i.find(".btn-edit-register").on("click",function(){FormStatus.updateStatus(1),d(0),n.css("width","2%")})};return a.navigateByHash=function(e){1===e?(i.addClass("hide"),t.removeClass("hide"),h(!0),FormStatus.updateStatus(1)):2===e&&(t.css({width:1,height:1,position:"absolute"}).removeClass("hide"),t.valid()?(t.removeAttr("style").addClass("hide"),i.removeClass("hide"),h(!1),FormStatus.updateStatus(2)):(window.location.hash="#step-1",t.removeAttr("style"),i.addClass("hide"),FormStatus.updateStatus(1)))},a.init=function(){if(t=e(".card-register-step-1"),i=e(".card-register-step-2"),0===t.length||0===i.length)return a;n=e(".card-register-page .process-bar .status-percent"),e(".read-full-text-disappear").on("click",function(){e(this).hide()}),e(".selectUI").length&&e(".selectUI").selectUI({autoTemplate:!0,onAfterChange:function(t){e(t).valid()}}),e(".form-group-fulldate-group").each(function(){e(this).find(".date-inputs input").on("change",function(){var t=e(this).parent(),i=t.children("input");t.prev().val(i.get(0).value+"/"+i.get(1).value+"/"+i.get(2).value).trigger("keyup")}).filter(":not(.year-input)").on("keyup",function(){2==this.value.length&&e(this).next().next().focus().val("")}),e(this).find(".resembled-date").on("focus",function(){e(this).prev().find("input:first").focus()})}),e(".nric-input").each(function(){var t=e(this).siblings("[type=hidden]");e(this).val(t.filter(".nric-1").val()+t.filter(".nric-2").val()+t.filter(".nric-3").val()),e(this).on("keyup",function(){var t=e(this).siblings("[type=hidden]");t.filter(".nric-1").val(this.value.substr(0,1)),t.filter(".nric-2").val(this.value.substr(1,7)),t.filter(".nric-3").val(this.value.substr(8,1))})}),e(".form-group-container-date").each(function(){e(this).find("input").on("keyup",function(){2==this.value.length&&e(this).next().focus()})});var d=e();return d=d.add(t).add(i),d.find('input[data-type="numerals"]').on("keydown",function(t){window.UOB.formMethod.numeralsOnly(t,e(this))}),d.find('input[data-format="currency"]').on("blur",function(t){window.UOB.formMethod.formatCurrency(t,e(this))}),d.find('[name="SingaporeNRIC"], [name="SingaporePR-NRIC"]').on("change",function(){e('[name="'+e(this).attr("data-binding-field")+'"]').val(this.value)}),validator1=t.validate({rules:r,errorElement:"span",errorPlacement:l,highlight:u,unhighlight:c,focusinvalid:!1,ignore:".ignore, :hidden"}),validator2=i.validate({rules:r,errorElement:"span",errorPlacement:l,highlight:u,unhighlight:c,focusinvalid:!1,ignore:".ignore, :hidden"}),f(),e("div[data-related-to]").each(function(){var t=e(this).attr("data-related-to"),i=e(this).attr("data-related-val"),n=e(this);e("input[type='radio'][name='"+t+"']").on("change",function(){var t=i.split("|");e.inArray(this.value,t)>=0?(n.removeClass("hide"),setTimeout(function(){window.UOB.formMethod.updateLabelDim(n)},0)):n.addClass("hide")})}),e("input[name='company']").on("change",function(){t.find("span.company-name").html(this.value)}),e(".form-group label.radio-input").on("click",function(){e(this).addClass("selected").siblings().removeClass("selected")}).find("input").filter(":checked").parent().addClass("selected"),e("#card-limit-slider .range-slider").noUiSlider({start:4e3,range:{min:[2e3,100],max:5e4}}).Link("lower").to('-inline-<div class="range-slider-value has-text"></div>',function(t){var i=Math.round(t);e("#card-limit").val(window.accounting.formatMoney(i,"",2)),e(this).html("<span>Card Limit</span><br><strong>"+o.to(i)+"</strong>"),e("#card-limit-slider").find(".noUi-marker-large").removeClass("active").filter(":lt("+Math.floor(i/1e4)+")").addClass("active")}),e("#card-limit-slider .range-slider").noUiSlider_pips({mode:"values",values:[1e4,2e4,3e4,4e4],format:o,density:1}),e("[name='name_creditcard']").on("change",function(){e(".card-name").html(this.value)}),"#step-2"===window.location.hash?(a.navigateByHash(2),window.UOB.formMethod.updateLabelDim(".card-register-step-2"),e(".status-percent").css("width","28%")):(a.navigateByHash(1),window.UOB.formMethod.updateLabelDim(".card-register-step-1"),e(".status-percent").css("width","2%")),a},a.init()}(),e("[placeholder]:first").length&&e("[placeholder]").placeholder()}),window.onload=function(){};