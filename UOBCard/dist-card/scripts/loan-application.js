window.accounting=window.accounting||{},window.UOB=window.UOB||{},window.UOB.formMethod=window.UOB.formMethod||{},window.UOB.formMethod.numeralsOnly=function(e,t){var a=$(t).val();-1!==a.indexOf(".")&&(190===e.keyCode||110===e.keyCode)&&e.preventDefault(),-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65===e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault()},window.UOB.formMethod.formatCurrency=function(e,t){var a=window.accounting.formatMoney($(t).val(),"",2);$(t).val(a)},jQuery(function(e){e.validator.addMethod("username",function(e){return!/[!@#$%\^&*(){}[\]<>?/|\-]/.test(e)},"Please enter a valid name."),e.validator.addMethod("NRIC",function(e){return/^[STFGstfg]\d{7}[A-Za-z]$/.test(e)},"Please enter a valid NRIC code."),e.validator.addMethod("money",function(e){return window.accounting.unformat(e)>0},"This field is required."),e.validator.addMethod("yearOldRule",function(e){var t=new Date;t.setFullYear(t.getFullYear()-21);var a=e.split("/"),i=new Date(a[2],a[1]-1,a[0]),n=Date.parse(i);return t-n>0},"Need to be greater than 21 years old!!"),e.validator.addMethod("mobile",function(e){return/^[89]\d{7}$/.test(e)},"Please enter correct mobile number."),e.validator.addMethod("phone",function(t){return""===e.trim(t)||/^[6]\d{7}$/.test(t)},"Please enter correct phone number."),e(".checkbox-item input[type='checkbox']").unbind("click").bind("click",function(){e(this).is(":checked")?e(this).closest(".checkbox-item").addClass("checked"):e(this).closest(".checkbox-item").removeClass("checked")}),e("#tab-required-documents a").click(function(t){t.preventDefault(),e(this).tab("show")}),window.CardRegistration=function(){var t,a,i,n={},r=e(".form-status"),d={yearofLivingInAboveAddr:{require_from_group:[1,".duration-date-group"]},monthofLivingInAboveAddr:{require_from_group:[1,".duration-date-group"]},yearofEmployment:{require_from_group:[1,".duration-date-group-2"]},monthofEmployment:{require_from_group:[1,".duration-date-group-2"]},CPFStatementDate:{required:function(){return 1===e("#check-confirm-cpf-submission:checked").length}}},o={"one-card":"images/card-register/card-faces/one-card-face.png","lady-card":"images/card-register/card-faces/lady-card-face.png","visa-sign-card":"images/card-register/card-faces/visa-signature-face.png","prvi-amex-card":"images/card-register/card-faces/prvi-amex-face.png"},s=wNumb({decimals:0,thousand:",",prefix:"S$"}),l=function(t){e("html, body").animate({scrollTop:t},200)},c=function(){var t=e("body").find(".form-group-container.error:not(:hidden)");if(t.length)var a=e(t).eq(0).offset().top;else var i=e("body").find(".checkbox-item .error:not(:hidden)"),a=e(i).eq(0).closest(".checkbox-item").offset().top;e(window).width()>=1024&&(a-=e(".header").height()),l(a)},u=function(t,a){var i=e(a).closest(".form-group-container");i.length?i.append(t):e(a).parent().append(t)},f=function(t,a){e(t).closest(".form-group-container").addClass("error")},h=function(t,a){e(t).closest(".form-group-container").removeClass("error")},m=function(){e("#new-customer").each(function(){var a=e(this).find(".full-name input").val(),i=e(this).find(".email input").val(),n=e(this).find(".mobile input").val(),r=e(this).find(".customer-title input:checked").val();t.find("[name='fullnameOnCard']").val(a),t.find("[name='fullname']").val(a),t.find("[name='email']").val(i),t.find("[name='mobile']").val(n),t.find("[name='title']").val(r),t.find(".card-register-step-2 .card-name").html(a);var d=e(this).find(".customer-title input:checked").val();if("Mr"===d||"Dr"===d)var o="Male";else var o="Female";t.find("[name='gender']").removeAttr("checked").parent().removeClass("selected").end().filter("[value='"+o+"']").prop("checked","checked").parent().addClass("selected").siblings().removeClass("selected")})},v=function(){var a=t.get(0);e(".card-register-step-3 tr").removeClass("hide"),e(".card-register-step-3 .label-data").each(function(){var i=e(this).attr("data-model");if(t.get(0)[i]){var n=t.find("[name="+i+"]");n.filter(":visible").length?"input"===n.get(0).tagName.toLowerCase()?e(this).html("radio"===n.attr("type")?n.filter(":checked").val():n.val()):"select"===n.get(0).tagName.toLowerCase()&&e(this).html(n.val()):n.filter("[type='hidden']").length?e(this).html(n.val()):e(this).html("").parent().addClass("hide")}else{var r="";switch(i){case"NRIC":var d=e("input[name='nationality']:checked").val();r="Singaporean"==d?t.get(0).SingaporeNRIC.value:"Singapore PR"==d?t.get(0)["SingaporePR-NRIC"].value:t.get(0).passport.value;break;case"timeofLivingInAboveAddr":r=a.yearofLivingInAboveAddr.value+" year(s) "+a.monthofLivingInAboveAddr.value+" month(s)";break;case"timeofEmployment":r=a.yearofEmployment.value+" year(s) "+a.monthofEmployment.value+" month(s)";break;case"country":var d=e("input[name='nationality']:checked").val();"Singapore PR"==d?r=t.get(0).countrySingPR.value:"Foreigners"==d&&(r=t.get(0).countryForeigner.value),""===r&&e(this).parent().addClass("hide")}e(this).html(r)}})},p=function(){e("#existing-customer").each(function(){var a=e(this).find(".full-name input").val(),i=e(this).find(".email input").val(),n=e(this).find(".contact input").val(),r=e(this).find(".customer-title input:checked").val();t.find("[name='fullname']").val(a),t.find("[name='email']").val(i),t.find("[name='title']").val(r),t.find("[name='exCustomerContact']").val(n),t.find("[name='exCustomerNRIC']").val(r),t.get(0).submit()})},g=function(t){e(".header").toggleClass("in-step-1",t).sticky("update")},C=function(t){e(t).find(".input-control-group").each(function(){var t=0,a=e(this).find("label.radio-input").attr("style");a&&a.indexOf("width")>=0||e(this).find("label.radio-input:not(:hidden)").each(function(){t<e(this).width()+2&&(t=e(this).width()+2)}).width(t)});var a=e(t).find(".radio-input");a.first().data("styleCache")?e.fn.matchHeight._update():e(t).find(".radio-input").matchHeight()},y=function(){t.on("submit",function(e){return e.originalEvent?!1:void 0}),t.find(".step-1-submission .btn-submit").on("click",function(e){if(e.preventDefault(),t.valid()){if(g(!1),"existing-customer"==t.find(".lead-form-wrapper").children("div:visible").attr("id"))return void p();t.find(".card-register-step-1").addClass("hide"),t.find(".card-register-step-2").removeClass("hide").find(".frm-name-card input").focus(),r.find("[data-related-step='card-register-step-2']").addClass("active").prevAll().addClass("active").end().nextAll().removeClass("active"),l(0),a.css("width","28%"),m(),C(".card-register-step-2")}else c()}),t.find(".step-2-submission .btn-submit").on("click",function(e){e.preventDefault(),t.valid()?(v(),t.find(".card-register-step-2").addClass("hide"),t.find(".card-register-step-3").removeClass("hide"),r.find("[data-related-step='card-register-step-3']").addClass("active").prevAll().addClass("active").end().nextAll().removeClass("active"),l(0),a.css("width","89%")):c()}),t.find(".submit-footer .btn-regis-done").on("click",function(a){a.preventDefault(),t.valid()?(t.find(".form-status").find("li").addClass("active"),t.submit()):(i.focusInvalid(),e("html").hasClass("touch")&&e(window).width()>=1024&&c())}),t.find(".btn-edit-register").on("click",function(){var t=e(this).attr("data-target");g("card-register-step-1"==t);var i=e(this).closest(".card-register-step").addClass("hide").siblings("#"+t).removeClass("hide");r.find("[data-related-step='"+e(this).attr("data-target")+"']").addClass("active").prevAll().addClass("active").end().nextAll().removeClass("active"),l(0),a.css("width",i.attr("data-percent-complete")+"%")})};return n.formStatusInit=function(){r.find("a").on("click",function(t){t.preventDefault();var a=e(this).closest("li");if(a.hasClass("active")){if(!e("#"+a.attr("data-related-step")).hasClass("hide"))return;e(".card-register-step").addClass("hide");var i=a.attr("data-related-step");g("card-register-step-1"==i),e("#"+i).removeClass("hide"),a.addClass("active").nextAll().removeClass("active")}})},n.init=function(){return n.formStatusInit(),t=e("#card-register-form"),0===t.length?n:(a=e(".card-register-page .process-bar .status-percent"),e(".read-full-text-disappear").on("click",function(){e(this).hide()}),e(".selectUI").length&&e(".selectUI").selectUI({autoTemplate:!0,onAfterChange:function(t){e(t).valid()}}),e(".form-group-fulldate-group").each(function(){e(this).find(".fake-date-input input").on("change",function(){var t=e(this).parent(),a=t.children("input");t.prev().val(a.get(0).value+"/"+a.get(1).value+"/"+a.get(2).value).trigger("keyup")}).filter(":not(.fake-year)").on("keyup",function(){2==this.value.length&&e(this).next().next().focus().val("")}),e(this).find(".real-date").on("focus",function(){e(this).prev().find("input:first").focus()})}),e(".form-group-container-date").each(function(){e(this).find("input").on("keyup",function(){2==this.value.length&&e(this).next().focus()})}),t.find('input[data-type="numerals"]').on("keydown",function(t){window.UOB.formMethod.numeralsOnly(t,e(this))}),t.find('input[data-format="currency"]').on("blur",function(t){window.UOB.formMethod.formatCurrency(t,e(this))}),t.find('[name="SingaporeNRIC"], [name="SingaporePR-NRIC"]').on("change",function(){e('[name="'+e(this).attr("data-binding-field")+'"]').val(this.value)}),i=t.validate({rules:d,errorElement:"span",errorPlacement:u,highlight:f,unhighlight:h,focusInvalid:!1,ignore:".ignore, :hidden"}),y(),e(".customer-type-switch input[type='radio']").on("change",function(){e(this).parent().addClass("selected").siblings().removeClass("selected");var t=e(this).parent().attr("data-target");e(t).removeClass("hide").siblings().addClass("hide"),C(t)}),e("div[data-related-to]").each(function(){var t=e(this).attr("data-related-to"),a=e(this).attr("data-related-val"),i=e(this);e("input[type='radio'][name='"+t+"']").on("change",function(){i.toggleClass("hide",this.value!==a),this.value===a&&C(i)})}),e("input[name='company']").on("change",function(){t.find("span.company-name").html(this.value)}),e(".form-group label.radio-input").on("click",function(){e(this).addClass("selected").siblings().removeClass("selected")}).find("input").filter(":checked").parent().addClass("selected"),e("#card-limit-slider .range-slider").noUiSlider({start:4e3,range:{min:[2e3,100],max:5e4}}).Link("lower").to('-inline-<div class="range-slider-value has-text"></div>',function(t){var a=Math.round(t);e("#card-limit").val(window.accounting.formatMoney(a,"",2)),e(this).html("<span>Card Limit</span><br><strong>"+s.to(a)+"</strong>"),e("#card-limit-slider").find(".noUi-marker-large").removeClass("active").filter(":lt("+Math.floor(a/1e4)+")").addClass("active")}),e("#card-limit-slider .range-slider").noUiSlider_pips({mode:"values",values:[1e4,2e4,3e4,4e4],format:s,density:1}),e("[name='fullnameOnCard']").on("change",function(){e(".card-name").html(this.value)}),e("[name='fullnameOnUOBCard']").on("change",function(){e(".uob-card-name").html(this.value)}),e(".applyUOBCard input").on("change",function(){var t=e(this).closest(".applyUOBCard"),a=t.find("input:checked");if(a.length)t.find(".card-face").attr("src",o[a.attr("data-card")]);else{var i=t.find("input").first().attr("checked","checked").attr("data-card");t.find(".card-face").attr("src",o[i])}}),t.find("#check-confirm-cpf-submission").on("change",function(){if(this.checked){var e=t.find(".CPFSubmissionDate"),a=new Date,i=a.getDate(),n=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,r=a.getFullYear();e.find(".fake-day").val(i),e.find(".fake-month").val(n),e.find(".fake-year").val(r).trigger("change")}}),void C(".card-register-step-1"))},n.init()}(),e("[placeholder]:first").length&&e("[placeholder]").placeholder()}),window.onload=function(){};